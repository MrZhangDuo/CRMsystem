<html>
<head>
    <meta charset="utf-8">
    <title>所有商机</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/lib/layui-v2.5.5/css/layui.css" media="all">
    <link rel="stylesheet" href="/css/public.css" media="all">

</head>
    <style type="text/css">
        /* 文本框样式设置*/
        .layui-input-block {
            width: 600px;
            height:30px;
            margin-left: 700px;
        }

        .layui-input{
            width: 280px;
            height:30px;
        }

        #rese{
            margin: 0px auto;
            width: 200px;
            margin-left: 400px;
        }
        #chazhao{
            margin: 0px auto;
            width: 200px;
            margin-left: 50px;
        }



    </style>

<body>
<div class="layuimini-container">
    <fieldset class="table-search-fieldset">
        <legend>搜索信息</legend>
            <form class="layui-form layui-form-pane">

                <div class="layui-form-item">
                    <div class="layui-inline">
                        商机全称:<input type="text" name="busName" lay-verify="title" autocomplete="off" placeholder="请输入商机全称" class="layui-input">
                    </div>
                    <div class="layui-inline">
                        商机阶段:<input type="text" name="busStage" lay-verify="title" autocomplete="off" placeholder="请输入商机阶段" class="layui-input">
                    </div>
                    <div class="layui-inline">
                        商机负责人<input type="text" name="busDutyPeople" lay-verify="title" autocomplete="off" placeholder="请输入商机负责人" class="layui-input">
                    </div>
                    <div class="layui-inline">
                        预计成交金额:<input type="text" name="busBeforeMoney" lay-verify="title" autocomplete="off" placeholder="请输入预计成交金额" class="layui-input">
                    </div>
                </div>

                <div>
                    <div class="layui-inline">
                        <input type="reset" class="layui-btn layui-btn-normal" lay-filter="data-search-btn" id="rese">
                        <button type="submit" class="layui-btn layui-btn-primary" lay-submit  lay-filter="findeBus" id="chazhao"><i class="layui-icon"></i> 查找商机 </button>
                    </div>
                </div>
            </form>
    </fieldset>

    <div class="layui-col-md3">
        <div class="layui-card">
            <div class="layui-card-header">
                <i class="fa fa-bullhorn icon icon-tip"></i>
                分类
            </div>
            <div class="layui-card-body layui-text">
                <div class="layuimini-notice">
                    <div class="layuimini-notice-title">所有分类</div>
                </div>
                <div class="layuimini-notice">
                    <div class="layuimini-notice-title">
                        <a herf="javascript:void(0);" id="proceedBus">进行中的商机</a>
                        <span class="layui-badge layui-bg-blue" id="proceedBusValue"></span>
                    </div>
                </div>
                <div class="layuimini-notice">
                    <div class="layuimini-notice-title">
                        <a herf="javascript:void(0);" id="Seven">7天未跟单</a>
                        <span class="layui-badge layui-bg-blue" id="SevenValue"></span>
                    </div>
                </div>
                <div class="layuimini-notice">
                    <div class="layuimini-notice-title">
                        <a herf="javascript:void(0);" id="Thirty"> 30天未跟单</a>
                        <span class="layui-badge layui-bg-blue" id="ThirtyValue"></span>
                    </div>
                </div>
                <div class="layuimini-notice">
                    <div class="layuimini-notice-title">
                        <a herf="javascript:void(0);" id="Ninety"> 90天未跟单</a>
                        <span class="layui-badge layui-bg-blue" id="NinetyValue"></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-card">
            <div class="layui-card-body layui-text">
                <div class="layuimini-notice">
                    <div class="layuimini-notice-title">
                        <a herf="javascript:void(0);" id="week"> 本周新增</a>
                        <span class="layui-badge layui-bg-blue" id="weekValue"></span>
                    </div>
                </div>
                <div class="layuimini-notice">
                    <div class="layuimini-notice-title">
                        <a herf="javascript:void(0);" id="lastWeek"> 上周新增</a>
                        <span class="layui-badge layui-bg-blue" id="lastWeekValue"></span>
                    </div>
                </div>
                <div class="layuimini-notice">
                    <div class="layuimini-notice-title">
                        <a herf="javascript:void(0);" id="month"> 本月新增</a>
                        <span class="layui-badge layui-bg-blue" id="monthValue"></span>
                    </div>
                </div>
                <div class="layuimini-notice">
                    <div class="layuimini-notice-title">
                        <a herf="javascript:void(0);" id="lastMonth"> 上月新增</a>
                        <span class="layui-badge layui-bg-blue" id="lastMonthValue"></span>
                    </div>
                </div>
                <div class="layuimini-notice">
                    <div class="layuimini-notice-title">
                        <a herf="javascript:void(0);" id="quarter"> 本季度新增</a>
                        <span class="layui-badge layui-bg-blue" id="quarterValue"></span>
                    </div>
                </div>
                <div class="layuimini-notice">
                    <div class="layuimini-notice-title">
                        <a herf="javascript:void(0);" id="lastQuarter"> 上季度新增</a>
                        <span class="layui-badge layui-bg-blue" id="lastQuarterValue"></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-card">
            <div class="layui-card-body layui-text">
                <div class="layuimini-notice">
                    <div class="layuimini-notice-title">
                        <a herf="javascript:void(0);" id="traded"> 已成交的商机</a>
                        <span class="layui-badge layui-bg-blue" id="tradedValue"></span>
                    </div>
                </div>
                <div class="layuimini-notice">
                    <div class="layuimini-notice-title">
                        <a herf="javascript:void(0);" id="throw"> 已丢单的商机</a>
                        <span class="layui-badge layui-bg-blue" id="throwValue"></span>
                    </div>
                </div>
                <div class="layuimini-notice">
                    <div class="layuimini-notice-title">
                        <a herf="javascript:void(0);" id="shelve"> 已搁置的商机</a>
                        <span class="layui-badge layui-bg-blue" id="shelveValue"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="layui-col-md-offset3">
        <script type="text/html" id="toolbarDemo">
            <div class="layui-btn-container">
                <button class="layui-btn layui-btn-sm data-add-btn" lay-event="add">
                    <a href="/page/business/addBusiness.html"> 添加商机</a>
                </button>
            </div>
        </script>

        <table class="layui-hide" id="currentTableId" lay-filter="currentTableFilter"></table>
    </div>
</div>
<script src="/lib/layui-v2.5.5/layui.js" charset="utf-8"></script>
<script>
    layui.use(['form', 'table','jquery', 'laydate'], function () {
        var $ = layui.jquery,
            form = layui.form,
            laydate = layui.laydate
            table = layui.table;
        laydate.render({
            elem: '#date1'
        });
        table.render({
            elem: '#currentTableId',
            toolbar: '#toolbarDemo'
            ,page: true //开启分页
            ,url: '/business/selectAllBusInfo.do' //数据接口
            ,type:'get'
            ,cols: [[
                {field: 'busName', width: 250, title: '商机名称',templet:'<div><a  href="/business/custByBusId.do?busId={{d.busId}}" class="layui-table-link">{{d.busName}}</a></div>'},
                {field: 'busStage', width: 180, title: '商机阶段'},
                {field: 'busBeforeMoney', width: 130, title: '预计成交金额'},
                {field: 'busDutyPeople', width: 180, title: '商机负责人'},
                {field: 'gdTime', width: 130, title: '最后跟单',templet:'<div><a  href="  " class="layui-table-link">{{d.gdTime==null?0:d.gdTime}}</a></div>'},
                {field: 'invitationId', width: 130, title: '讨论版',templet:'<div><a  href="  " class="layui-table-link">{{d.invitationId==null?0:d.invitationId}}</a></div>'},
            ]]
        });

      /*根据id渲染表格*/
        $("#proceedBus").click(function(){
            table.render({
                elem: '#currentTableId',
                toolbar: '#toolbarDemo'
                ,page: true //开启分页
                ,url: '/business/proceedBus.do' //数据接口
                ,type:'get'
                ,cols: [[
                    {field: 'busName', width: 250, title: '商机名称',templet:'<div><a  href="/business/custByBusId.do?busId={{d.busId}}" class="layui-table-link">{{d.busName}}</a></div>'},
                    {field: 'busStage', width: 180, title: '商机阶段'},
                    {field: 'busBeforeMoney', width: 130, title: '预计成交金额'},
                    {field: 'busDutyPeople', width: 180, title: '商机负责人'},
                    {field: 'gdTime', width: 130, title: '最后跟单',templet:'<div><a  href="  " class="layui-table-link">{{d.gdTime}}</a></div>'},
                    {field: 'invitationId', width: 130, title: '讨论版',templet:'<div><a  href="  " class="layui-table-link">{{d.invitationId==null?0:d.invitationId}}</a></div>'},
                ]]
            });
        });
        $("#Seven").click(function(){
            table.render({
                elem: '#currentTableId',
                toolbar: '#toolbarDemo'
                ,page: true //开启分页
                ,url: '/business/docTimeLessSeven.do' //数据接口
                ,type:'get'
                ,cols: [[
                    {field: 'busName', width: 250, title: '商机名称',templet:'<div><a  href="/business/custByBusId.do?busId={{d.busId}}" class="layui-table-link">{{d.busName}}</a></div>'},
                    {field: 'busStage', width: 180, title: '商机阶段'},
                    {field: 'busBeforeMoney', width: 130, title: '预计成交金额'},
                    {field: 'busDutyPeople', width: 180, title: '商机负责人'},
                    {field: 'gdTime', width: 130, title: '最后跟单',templet:'<div><a  href="  " class="layui-table-link">{{d.gdTime}}</a></div>'},
                    {field: 'invitationId', width: 130, title: '讨论版',templet:'<div><a  href="  " class="layui-table-link">{{d.invitationId==null?0:d.invitationId}}</a></div>'},
                ]]
            });
        });
        $("#Thirty").click(function(){
            table.render({
                elem: '#currentTableId',
                toolbar: '#toolbarDemo'
                ,page: true //开启分页
                ,url: '/business/docTimeLessThirty.do' //数据接口
                ,type:'get'
                ,cols: [[
                    {field: 'busName', width: 250, title: '商机名称',templet:'<div><a  href="/business/custByBusId.do?busId={{d.busId}}" class="layui-table-link">{{d.busName}}</a></div>'},
                    {field: 'busStage', width: 180, title: '商机阶段'},
                    {field: 'busBeforeMoney', width: 130, title: '预计成交金额'},
                    {field: 'busDutyPeople', width: 180, title: '商机负责人'},
                    {field: 'gdTime', width: 130, title: '最后跟单',templet:'<div><a  href="  " class="layui-table-link">{{d.gdTime}}</a></div>'},
                    {field: 'invitationId', width: 130, title: '讨论版',templet:'<div><a  href="  " class="layui-table-link">{{d.invitationId==null?0:d.invitationId}}</a></div>'},
                ]]
            });
        });
        $("#Ninety").click(function(){
            table.render({
                elem: '#currentTableId',
                toolbar: '#toolbarDemo'
                ,page: true //开启分页
                ,url: '/business/docTimeLessNinety.do' //数据接口
                ,type:'get'
                ,cols: [[
                    {field: 'busName', width: 250, title: '商机名称',templet:'<div><a  href="/business/custByBusId.do?busId={{d.busId}}" class="layui-table-link">{{d.busName}}</a></div>'},
                    {field: 'busStage', width: 180, title: '商机阶段'},
                    {field: 'busBeforeMoney', width: 130, title: '预计成交金额'},
                    {field: 'busDutyPeople', width: 180, title: '商机负责人'},
                    {field: 'gdTime', width: 130, title: '最后跟单',templet:'<div><a  href="  " class="layui-table-link">{{d.gdTime}}</a></div>'},
                    {field: 'invitationId', width: 130, title: '讨论版',templet:'<div><a  href="  " class="layui-table-link">{{d.invitationId==null?0:d.invitationId}}</a></div>'},
                ]]
            });
        });
        $("#traded").click(function(){
            table.render({
                elem: '#currentTableId',
                toolbar: '#toolbarDemo'
                ,page: true //开启分页
                ,url: '/business/tradedBus.do' //数据接口
                ,type:'get'
                ,cols: [[
                    {field: 'busName', width: 250, title: '商机名称',templet:'<div><a  href="/business/custByBusId.do?busId={{d.busId}}" class="layui-table-link">{{d.busName}}</a></div>'},
                    {field: 'busStage', width: 180, title: '商机阶段'},
                    {field: 'busBeforeMoney', width: 130, title: '预计成交金额'},
                    {field: 'busDutyPeople', width: 180, title: '商机负责人'},
                    {field: 'gdTime', width: 130, title: '最后跟单',templet:'<div><a  href="  " class="layui-table-link">{{d.gdTime}}</a></div>'},
                    {field: 'invitationId', width: 130, title: '讨论版',templet:'<div><a  href="  " class="layui-table-link">{{d.invitationId==null?0:d.invitationId}}</a></div>'},
                ]]
            });
        });
        $("#throw").click(function(){
            table.render({
                elem: '#currentTableId',
                toolbar: '#toolbarDemo'
                ,page: true //开启分页
                ,url: '/business/throwBus.do' //数据接口
                ,type:'get'
                ,cols: [[
                    {field: 'busName', width: 250, title: '商机名称',templet:'<div><a  href="/business/custByBusId.do?busId={{d.busId}}" class="layui-table-link">{{d.busName}}</a></div>'},
                    {field: 'busStage', width: 180, title: '商机阶段'},
                    {field: 'busBeforeMoney', width: 130, title: '预计成交金额'},
                    {field: 'busDutyPeople', width: 180, title: '商机负责人'},
                    {field: 'gdTime', width: 130, title: '最后跟单',templet:'<div><a  href="  " class="layui-table-link">{{d.gdTime}}</a></div>'},
                    {field: 'invitationId', width: 130, title: '讨论版',templet:'<div><a  href="  " class="layui-table-link">{{d.invitationId==null?0:d.invitationId}}</a></div>'},
                ]]
            });
        });
        $("#shelve").click(function(){
            table.render({
                elem: '#currentTableId',
                toolbar: '#toolbarDemo'
                ,page: true //开启分页
                ,url: '/business/shelveBus.do' //数据接口
                ,type:'get'
                ,cols: [[
                    {field: 'busName', width: 250, title: '商机名称',templet:'<div><a  href="/business/custByBusId.do?busId={{d.busId}}" class="layui-table-link">{{d.busName}}</a></div>'},
                    {field: 'busStage', width: 180, title: '商机阶段'},
                    {field: 'busBeforeMoney', width: 130, title: '预计成交金额'},
                    {field: 'busDutyPeople', width: 180, title: '商机负责人'},
                    {field: 'gdTime', width: 130, title: '最后跟单',templet:'<div><a  href="  " class="layui-table-link">{{d.gdTime}}</a></div>'},
                    {field: 'invitationId', width: 130, title: '讨论版',templet:'<div><a  href="  " class="layui-table-link">{{d.invitationId==null?0:d.invitationId}}</a></div>'},
                ]]
            });
        });
        $("#week").click(function(){
            table.render({
                elem: '#currentTableId',
                toolbar: '#toolbarDemo'
                ,page: true //开启分页
                ,url: '/business/weekAdd.do' //数据接口
                ,type:'get'
                ,cols: [[
                    {field: 'busName', width: 250, title: '商机名称',templet:'<div><a  href="/business/custByBusId.do?busId={{d.busId}}" class="layui-table-link">{{d.busName}}</a></div>'},
                    {field: 'busStage', width: 180, title: '商机阶段'},
                    {field: 'busBeforeMoney', width: 130, title: '预计成交金额'},
                    {field: 'busDutyPeople', width: 180, title: '商机负责人'},
                    {field: 'gdTime', width: 130, title: '最后跟单',templet:'<div><a  href="  " class="layui-table-link">{{d.gdTime}}</a></div>'},
                    {field: 'invitationId', width: 130, title: '讨论版',templet:'<div><a  href="  " class="layui-table-link">{{d.invitationId==null?0:d.invitationId}}</a></div>'},
                ]]
            });
        });
        $("#lastWeek").click(function(){
            table.render({
                elem: '#currentTableId',
                toolbar: '#toolbarDemo'
                ,page: true //开启分页
                ,url: '/business/lastWeekAdd.do' //数据接口
                ,type:'get'
                ,cols: [[
                    {field: 'busName', width: 250, title: '商机名称',templet:'<div><a  href="/business/custByBusId.do?busId={{d.busId}}" class="layui-table-link">{{d.busName}}</a></div>'},
                    {field: 'busStage', width: 180, title: '商机阶段'},
                    {field: 'busBeforeMoney', width: 130, title: '预计成交金额'},
                    {field: 'busDutyPeople', width: 180, title: '商机负责人'},
                    {field: 'gdTime', width: 130, title: '最后跟单',templet:'<div><a  href="  " class="layui-table-link">{{d.gdTime}}</a></div>'},
                    {field: 'invitationId', width: 130, title: '讨论版',templet:'<div><a  href="  " class="layui-table-link">{{d.invitationId==null?0:d.invitationId}}</a></div>'},
                ]]
            });
        });
        $("#month").click(function(){
            table.render({
                elem: '#currentTableId',
                toolbar: '#toolbarDemo'
                ,page: true //开启分页
                ,url: '/business/monthAdd.do' //数据接口
                ,type:'get'
                ,cols: [[
                    {field: 'busName', width: 250, title: '商机名称',templet:'<div><a  href="/business/custByBusId.do?busId={{d.busId}}" class="layui-table-link">{{d.busName}}</a></div>'},
                    {field: 'busStage', width: 180, title: '商机阶段'},
                    {field: 'busBeforeMoney', width: 130, title: '预计成交金额'},
                    {field: 'busDutyPeople', width: 180, title: '商机负责人'},
                    {field: 'gdTime', width: 130, title: '最后跟单',templet:'<div><a  href="  " class="layui-table-link">{{d.gdTime}}</a></div>'},
                    {field: 'invitationId', width: 130, title: '讨论版',templet:'<div><a  href="  " class="layui-table-link">{{d.invitationId==null?0:d.invitationId}}</a></div>'},
                ]]
            });
        });
        $("#lastMonth").click(function(){
            table.render({
                elem: '#currentTableId',
                toolbar: '#toolbarDemo'
                ,page: true //开启分页
                ,url: '/business/lastMonthAdd.do' //数据接口
                ,type:'get'
                ,cols: [[
                    {field: 'busName', width: 250, title: '商机名称',templet:'<div><a  href="/business/custByBusId.do?busId={{d.busId}}" class="layui-table-link">{{d.busName}}</a></div>'},
                    {field: 'busStage', width: 180, title: '商机阶段'},
                    {field: 'busBeforeMoney', width: 130, title: '预计成交金额'},
                    {field: 'busDutyPeople', width: 180, title: '商机负责人'},
                    {field: 'gdTime', width: 130, title: '最后跟单',templet:'<div><a  href="  " class="layui-table-link">{{d.gdTime}}</a></div>'},
                    {field: 'invitationId', width: 130, title: '讨论版',templet:'<div><a  href="  " class="layui-table-link">{{d.invitationId==null?0:d.invitationId}}</a></div>'},
                ]]
            });
        });
        $("#quarter").click(function(){
            table.render({
                elem: '#currentTableId',
                toolbar: '#toolbarDemo'
                ,page: true //开启分页
                ,url: '/business/quarterAdd.do' //数据接口
                ,type:'get'
                ,cols: [[
                    {field: 'busName', width: 250, title: '商机名称',templet:'<div><a  href="/business/custByBusId.do?busId={{d.busId}}" class="layui-table-link">{{d.busName}}</a></div>'},
                    {field: 'busStage', width: 180, title: '商机阶段'},
                    {field: 'busBeforeMoney', width: 130, title: '预计成交金额'},
                    {field: 'busDutyPeople', width: 180, title: '商机负责人'},
                    {field: 'gdTime', width: 130, title: '最后跟单',templet:'<div><a  href="  " class="layui-table-link">{{d.gdTime}}</a></div>'},
                    {field: 'invitationId', width: 130, title: '讨论版',templet:'<div><a  href="  " class="layui-table-link">{{d.invitationId==null?0:d.invitationId}}</a></div>'},
                ]]
            });
        });
        $("#lastQuarter").click(function(){
            table.render({
                elem: '#currentTableId',
                toolbar: '#toolbarDemo'
                ,page: true //开启分页
                ,url: '/business/lastQuarterAdd.do' //数据接口
                ,type:'get'
                ,cols: [[
                    {field: 'busName', width: 250, title: '商机名称',templet:'<div><a  href="/business/custByBusId.do?busId={{d.busId}}" class="layui-table-link">{{d.busName}}</a></div>'},
                    {field: 'busStage', width: 180, title: '商机阶段'},
                    {field: 'busBeforeMoney', width: 130, title: '预计成交金额'},
                    {field: 'busDutyPeople', width: 180, title: '商机负责人'},
                    {field: 'gdTime', width: 130, title: '最后跟单',templet:'<div><a  href="  " class="layui-table-link">{{d.gdTime}}</a></div>'},
                    {field: 'invitationId', width: 130, title: '讨论版',templet:'<div><a  href="  " class="layui-table-link">{{d.invitationId==null?0:d.invitationId}}</a></div>'},
                ]]
            });
        });

        /*ajax异步提交，根据id给对应的徽章赋值*/
        $.ajax({
            url:'/business/proceedBusNumber.do',
            method:'get',
            dataType:'JSON',
            success:function(res) {
                $("#proceedBusValue").append(res);
            }
        }) ;
        $.ajax({
            url:'/business/docTimeLessSevenNumber.do',
            method:'get',
            dataType:'JSON',
            success:function(res) {
                $("#SevenValue").append(res);
            }
        }) ;
        $.ajax({
            url:'/business/docTimeLessThirtyNumber.do',
            method:'get',
            dataType:'JSON',
            success:function(res) {
                $("#ThirtyValue").append(res);
            }
        }) ;
        $.ajax({
            url:'/business/docTimeLessNinetyNumber.do',
            method:'get',
            dataType:'JSON',
            success:function(res) {
                $("#NinetyValue").append(res);
            }
        }) ;
        $.ajax({
            url:'/business/tradedBusNumber.do',
            method:'get',
            dataType:'JSON',
            success:function(res) {
                $("#tradedValue").append(res);
            }
        }) ;
        $.ajax({
            url:'/business/throwBusNumber.do',
            method:'get',
            dataType:'JSON',
            success:function(res) {
                $("#throwValue").append(res);
            }
        }) ;
        $.ajax({
            url:'/business/shelveBusNumber.do',
            method:'get',
            dataType:'JSON',
            success:function(res) {
                $("#shelveValue").append(res);
            }
        }) ;
        $.ajax({
            url:'/business/weekAddNumber.do',
            method:'get',
            dataType:'JSON',
            success:function(res) {
                $("#weekValue").append(res);
            }
        }) ;
        $.ajax({
            url:'/business/lastWeekAddNumber.do',
            method:'get',
            dataType:'JSON',
            success:function(res) {
                $("#lastWeekValue").append(res);
            }
        }) ;
        $.ajax({
            url:'/business/monthAddNumber.do',
            method:'get',
            dataType:'JSON',
            success:function(res) {
                $("#monthValue").append(res);
            }
        }) ;
        $.ajax({
            url:'/business/lastMonthAddNumber.do',
            method:'get',
            dataType:'JSON',
            success:function(res) {
                $("#lastMonthValue").append(res);
            }
        }) ;
        $.ajax({
            url:'/business/quarterAddNumber.do',
            method:'get',
            dataType:'JSON',
            success:function(res) {
                $("#quarterValue").append(res);
            }
        }) ;
        $.ajax({
            url:'/business/lastQuarterAddNumber.do',
            method:'get',
            dataType:'JSON',
            success:function(res) {
                $("#lastQuarterValue").append(res);
            }
        }) ;


        /*监听form表单中的提交事件*/
        form.on('submit(findeBus)', function(data){
            table.reload('currentTableId', {
                url:'/business/selectAllBusInfo.do',
                where: data.field //设定异步数据接口的额外参数
            });
            return false;
        });

    });
</script>
</body>
</html>